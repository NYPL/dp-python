<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Creating a command-line script with arguments - Remote theme example</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Creating a command-line script with arguments | Remote theme example</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="Creating a command-line script with arguments" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/rewrite_ftsh/1_argparse.html" /> <meta property="og:url" content="http://localhost:4000/rewrite_ftsh/1_argparse.html" /> <meta property="og:site_name" content="Remote theme example" /> <script type="application/ld+json"> {"@type":"WebPage","headline":"Creating a command-line script with arguments","url":"http://localhost:4000/rewrite_ftsh/1_argparse.html","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> Remote theme example </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">About</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/rewrite_ftsh/1_overall.html" class="nav-list-link">Rewriting ft.sh</a><ul class="nav-list "><li class="nav-list-item active"><a href="http://localhost:4000/rewrite_ftsh/1_argparse.html" class="nav-list-link active">Creating a command-line script with arguments</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/rewrite_ftsh/1_overall.html">Rewriting ft.sh</a></li> <li class="breadcrumb-nav-list-item"><span>Creating a command-line script with arguments</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="creating-a-command-line-python-script-with-arguments"> <a href="#creating-a-command-line-python-script-with-arguments" class="anchor-heading" aria-labelledby="creating-a-command-line-python-script-with-arguments"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a command-Line Python script with arguments </h1> <h2 id="goals"> <a href="#goals" class="anchor-heading" aria-labelledby="goals"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Goals </h2> <ul> <li>Explain the purpose of the script</li> <li>Accept user input for the file path of the digital carrier</li> <li>Accept user input for the Media ID number (M######-####)</li> </ul> <h2 id="anatomy-of-a-script"> <a href="#anatomy-of-a-script" class="anchor-heading" aria-labelledby="anatomy-of-a-script"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Anatomy of a script </h2> <p>Many Python tutorials start in a Python interpreter, an environment where every block of code is executed once you press enter. This is much like how bash commands work when using a terminal or shell. Our goal is to create scripts, so we’ll start with scripts instead.</p> <p>For scripts that implement a strict, sequential procedure, the code can be organized with the same procedural order. When writing bash scripts, that means that the final script can look like a series of commands that could have been run in a terminal one-by-one. Grouping them into a script automates the process of entering those lines.</p> <p>However, a good script is more than a recording of a command-line session. Good practice means making sure that the script will be executed the same way everytime, and that you record any of your goals and logic for structuring the script as you did.</p> <p>The first lines of <code class="language-plaintext highlighter-rouge">ft.sh</code> demonstrate some of these practices:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="c">#This is a program to create Siegfried metadata, bags and validation for file transfers.</span>
<span class="c">#Check that sf conf file is set properly</span>

<span class="nv">BLUE</span><span class="o">=</span><span class="s1">'\033[0;36m'</span>
<span class="nv">NC</span><span class="o">=</span><span class="s1">'\033[0m'</span>

<span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="k">${</span><span class="nv">BLUE</span><span class="k">}</span><span class="s2">This script will create a file transfer.</span><span class="k">${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="k">${</span><span class="nv">BLUE</span><span class="k">}</span><span class="s2">Please drag the SIP folder over this window. See the folder path displayed? Hit return!:</span><span class="k">${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">"</span>

<span class="nb">read </span>FT
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">#!/bin/bash</code> is known as a <a href="https://en.wikipedia.org/wiki/Shebang_(Unix)">shebang</a>. The line tells the computer which interpreter to use to interpret the rest of the code in the script. This line isn’t strictly necessary, but it is good practice. For Python, we’ll be using the following shebang. <code class="language-plaintext highlighter-rouge">#!/usr/bin/env python3</code></p> <p>The <code class="language-plaintext highlighter-rouge"># ....</code> lines describe what this script does. Every script should have a description of its purpose. Python uses the same <code class="language-plaintext highlighter-rouge"># ...</code> syntax for comments, so we could mimic this method. However, how would a user not familiar with this script know what it does?</p> <p>If they were familiar with bash scripting, they could print out the script with a <code class="language-plaintext highlighter-rouge">cat</code> command or open it in a text editor to see this comment. If they were adventurous, they could run the script and hope it explains its purpose before doing any major changes. This script anticipates that method with its first <code class="language-plaintext highlighter-rouge">echo</code> line. To make something more user friendly, we could have help information. For example:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> ft.sh <span class="nt">-h</span>
<span class="c"># This is a program to create Siegfried metadata, bags and validation for file transfers.</span>
<span class="c">#Check that sf conf file is set properly</span>
</code></pre></div></div> <p>We’ll cover how to do that in Python.</p> <p>The <code class="language-plaintext highlighter-rouge">read FT</code> is where the procedural portion of this code starts. After executing that line, the terminal waits for a user to input a filepath and press enter, before running the next line in the script.</p> <p>From a user perspective, it would be nice to use command line arguments instead of prompts. When running this code, we’d only have to write a single line before the computer takes over. That also means that we could quickly alter that line to transfer from a different carrier or to correct a typo. For example:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> ft.sh <span class="nt">--source</span> /path/to/carrier_1 <span class="nt">--id</span> M12345_0001
<span class="o">&gt;</span> ft.sh <span class="nt">--source</span> /path/to/carrier_2 <span class="nt">--id</span> M12345_0002
</code></pre></div></div> <h2 id="a-python-ftsh"> <a href="#a-python-ftsh" class="anchor-heading" aria-labelledby="a-python-ftsh"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A Python ft.sh </h2> <p>After examining <code class="language-plaintext highlighter-rouge">ft.sh</code> our goal is to create a Python script that:</p> <ul> <li>uses a shebang</li> <li>includes a description and help function that a user can access with <code class="language-plaintext highlighter-rouge">-h</code></li> <li>accepts arguments using the flags <code class="language-plaintext highlighter-rouge">--source</code> and <code class="language-plaintext highlighter-rouge">--id</code></li> </ul> <h3 id="creating-and-running-a-python-script"> <a href="#creating-and-running-a-python-script" class="anchor-heading" aria-labelledby="creating-and-running-a-python-script"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating and running a python script </h3> <p>A python script is a text file with python code. Typically, it has a <code class="language-plaintext highlighter-rouge">.py</code> file extension, although this isn’t required. So to create a script,</p> <ol> <li>Open a text editor</li> <li>Add Python code: `print(‘Hello world’)</li> <li>Save the file to your Desktop as <code class="language-plaintext highlighter-rouge">ft.py</code></li> </ol> <p>To run this script,</p> <ol> <li>Open a terminal</li> <li>Use the python interpreter to run the file <code class="language-plaintext highlighter-rouge">python ~/Desktop/ft.py</code></li> </ol> <h3 id="making-an-executable-python-script"> <a href="#making-an-executable-python-script" class="anchor-heading" aria-labelledby="making-an-executable-python-script"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Making an executable python script </h3> <p>Ideally we wouldn’t have to type <code class="language-plaintext highlighter-rouge">python</code> every time we want to use this script. That’s the role of the shebang. But by default for security reasons, a computer does not allow any file to be executed. We have to change the mode of a script file to allow it to be executed.</p> <ol> <li>In the text editor, add <code class="language-plaintext highlighter-rouge">#!/usr/bin/env python3</code> as the first line of <code class="language-plaintext highlighter-rouge">ft.py</code></li> <li>Save <code class="language-plaintext highlighter-rouge">ft.py</code></li> <li>In the terminal, CHange the MODe of the script to executable <code class="language-plaintext highlighter-rouge">chmod +x ~/Desktop/ft.py</code></li> <li>Run the file <code class="language-plaintext highlighter-rouge">~/Desktop/ft.py</code></li> </ol> <h4 id="current-executable-script-file"> <a href="#current-executable-script-file" class="anchor-heading" aria-labelledby="current-executable-script-file"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Current executable script file </h4> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python3
</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Hello world'</span><span class="p">)</span>
</code></pre></div></div> <h3 id="making-more-functions-available"> <a href="#making-more-functions-available" class="anchor-heading" aria-labelledby="making-more-functions-available"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Making more functions available </h3> <p>By default, Python has about 75 built-in functions like <code class="language-plaintext highlighter-rouge">print()</code>, <code class="language-plaintext highlighter-rouge">input()</code>, and <code class="language-plaintext highlighter-rouge">compile()</code>. Most of these are too unspecific to perform the tasks that we want.</p> <p>Python also has over 200 built-in modules in its standard library that each contain tens or hundreds of additional functions for more specific purposes like manipulating accessing file systems (<code class="language-plaintext highlighter-rouge">os</code>), working with time data (<code class="language-plaintext highlighter-rouge">datetime</code>), and parsing arguments from command-line interfaces (<code class="language-plaintext highlighter-rouge">argparse</code>).</p> <p>Each of these modules is composed of multiple script files. To use a function defined in a module, the Python interpreter has to load that module. To minimize the amount of time spent loading modules that may not be used, Python does not load any modules by default.</p> <p>Importing <code class="language-plaintext highlighter-rouge">argparse</code> makes its functions available. To learn how to use it, or any Python module, it’s helpful to head to the module’s documentation. The <a href="https://docs.python.org/3/library/argparse.html">documentation for argparse</a> follows the standard documentation structure for all standard library modules.</p> <p>First, there is a minimal working example using good stylistic practice. You can copy paste this code yourself to test it out.</p> <p>Next, major concepts of the module are explained and illustrated with examples. These concepts are typically arranged in order of common usage. For <code class="language-plaintext highlighter-rouge">argparse</code>, the concepts are:</p> <ul> <li>the <code class="language-plaintext highlighter-rouge">ArgumentParser</code> object</li> <li>the <code class="language-plaintext highlighter-rouge">add_argument()</code> method</li> <li>the <code class="language-plaintext highlighter-rouge">parse_args()</code> method</li> <li>other tools in the module</li> </ul> <p>This type of documentation is often not read from start to finish, but skimmed and referenced as needed. Using <code class="language-plaintext highlighter-rouge">cmd+f</code> to jump to other portions of the page is frequently helpful.</p> <h3 id="adding-a-help-function"> <a href="#adding-a-help-function" class="anchor-heading" aria-labelledby="adding-a-help-function"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adding a help function </h3> <h4 id="import-the-module"> <a href="#import-the-module" class="anchor-heading" aria-labelledby="import-the-module"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Import the module </h4> <p>As shown in the initial example from the documentation, we need to first load <code class="language-plaintext highlighter-rouge">argparse</code> using an <code class="language-plaintext highlighter-rouge">import</code> statement. In general, all <code class="language-plaintext highlighter-rouge">import</code> statements should be at the beginning of a script, after a shebang.</p> <ul> <li>Add <code class="language-plaintext highlighter-rouge">import argparse</code> after the shebang.</li> </ul> <h4 id="create-an-argumentparser"> <a href="#create-an-argumentparser" class="anchor-heading" aria-labelledby="create-an-argumentparser"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create an ArgumentParser </h4> <p>After loading, <code class="language-plaintext highlighter-rouge">argparse</code> we can use the tools in the module. Whenever using code from a module, reference that code with the name of the module. This tells the Python interpreter which specific piece of code to use. For example, there is a built-in <code class="language-plaintext highlighter-rouge">open()</code> function and an <code class="language-plaintext highlighter-rouge">open()</code> function in the <code class="language-plaintext highlighter-rouge">gzip</code> module. To tell Python to open a file using the gzip compression algorithm, we have to use the specifically call the <code class="language-plaintext highlighter-rouge">gzip.open()</code>.</p> <p>Similarly, *to create an <code class="language-plaintext highlighter-rouge">ArgumentParser</code> object, we have to call <code class="language-plaintext highlighter-rouge">argparse.ArgumentParser()</code></p> <p>The <code class="language-plaintext highlighter-rouge">ArgumentParser</code> object takes a description. According to the <a href="https://docs.python.org/3/library/argparse.html#description">documentation</a>, this is used to describe the purpose of the program.</p> <p>Because we are creating an object and would like to change it and reference it, we store it to a variable.</p> <ul> <li>Add <code class="language-plaintext highlighter-rouge">parser = argparse.ArgumentParser(description='Create Siegfried metadata, bag files from a carrier, and validate bagging for file transfers')</code> after the import statement.</li> </ul> <h4 id="parse-the-arguments"> <a href="#parse-the-arguments" class="anchor-heading" aria-labelledby="parse-the-arguments"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Parse the arguments </h4> <p>Finally, the data stored in the <code class="language-plaintext highlighter-rouge">ArgumentParser</code> needs to be processed. For this, <code class="language-plaintext highlighter-rouge">ArgumentParser</code> objects have a method called <code class="language-plaintext highlighter-rouge">parse_args()</code>. The results of this method also have to be stored.</p> <ul> <li>Add <code class="language-plaintext highlighter-rouge">args = parser.parse_args()</code> after the <code class="language-plaintext highlighter-rouge">parser = ...</code> line.</li> <li>Save the script</li> <li>In the terminal, test the script <code class="language-plaintext highlighter-rouge">~/Desktop/ft.py -h</code></li> </ul> <h4 id="current-script-file-with-help"> <a href="#current-script-file-with-help" class="anchor-heading" aria-labelledby="current-script-file-with-help"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Current script file with help </h4> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python3
</span>
<span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="p">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s">'Create Siegfried metadata, bag files from a carrier, and validate bagging for file transfers'</span><span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s">'Hello world'</span><span class="p">)</span>
</code></pre></div></div> <h3 id="parsing-command-line-arguments"> <a href="#parsing-command-line-arguments" class="anchor-heading" aria-labelledby="parsing-command-line-arguments"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Parsing command line arguments </h3> <p>One of the reasons we had to store the <code class="language-plaintext highlighter-rouge">ArgumentParser</code> to a variable is because we want to store more arguments. The documentation example shows two arguments added with the <code class="language-plaintext highlighter-rouge">add_argument()</code> method.</p> <h4 id="adding-an-argument-to-the-parser"> <a href="#adding-an-argument-to-the-parser" class="anchor-heading" aria-labelledby="adding-an-argument-to-the-parser"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adding an argument to the parser </h4> <p>All of the arguments are being stored in the <code class="language-plaintext highlighter-rouge">ArgumentParser</code> object stored as <code class="language-plaintext highlighter-rouge">parser</code>. The <code class="language-plaintext highlighter-rouge">add_argument()</code> method updates that object with new data. Unlike in previous lines, we don’t need to create a variable to store this data because the method adds it to the object that it is called from.</p> <p>The powerful thing about <code class="language-plaintext highlighter-rouge">add_argument()</code> is the number of modifications we can make using the arguments in the method. We’ll review a few of the more usability focused modifications.</p> <h4 id="argument-names"> <a href="#argument-names" class="anchor-heading" aria-labelledby="argument-names"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Argument names </h4> <p>The first argument(s) in the method are the names of the argument. These can take 3 forms.</p> <ol> <li>a positional argument (e.g. <code class="language-plaintext highlighter-rouge">ft.py path/to/file</code>)</li> <li>a one-character flagged argument (e.g. <code class="language-plaintext highlighter-rouge">ft.py -s path/to/file</code>)</li> <li>a multi-character flagged argument (e.g. <code class="language-plaintext highlighter-rouge">ft.py --source path/to/file</code>)</li> </ol> <p>It’s possible to give an argument multiple allowable flags, (e.g. <code class="language-plaintext highlighter-rouge">parser.add_argument('-s', '--source')</code>)</p> <h4 id="optional-arguments"> <a href="#optional-arguments" class="anchor-heading" aria-labelledby="optional-arguments"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Optional arguments </h4> <p>By default, flagged arguments are assumed to be options. If you want to require that flag, add <code class="language-plaintext highlighter-rouge">required=True</code> (e.g.<code class="language-plaintext highlighter-rouge">parser.add_argument('--source', required=True)</code>)</p> <h4 id="arguments-help"> <a href="#arguments-help" class="anchor-heading" aria-labelledby="arguments-help"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Arguments help </h4> <p>It is often useful to explain the expected input for an argument. To do this, add <code class="language-plaintext highlighter-rouge">help='...'</code> (e.g.<code class="language-plaintext highlighter-rouge">parser.add_argument('--source', help='path to the carrier media')</code>)</p> <h4 id="usage-help"> <a href="#usage-help" class="anchor-heading" aria-labelledby="usage-help"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Usage help </h4> <p>The dummy inputs in the usage instructions can also be updated. To do this, add <code class="language-plaintext highlighter-rouge">metavar='...'</code> (e.g.<code class="language-plaintext highlighter-rouge">parser.add_argument('--source', metavar='path/to/carrier')</code>)</p> <h4 id="adding-everything-together"> <a href="#adding-everything-together" class="anchor-heading" aria-labelledby="adding-everything-together"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adding everything together </h4> <p><code class="language-plaintext highlighter-rouge">ft.sh</code> required 2 inputs</p> <ul> <li>the path to the source media</li> <li>the Media ID number</li> </ul> <p>In addition to defining these two inputs as argument, we can increase our usability by updating the help text for each.</p> <ul> <li>After <code class="language-plaintext highlighter-rouge">parser = ...</code> add the following.</li> </ul> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">parser</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">'--source'</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
<span class="n">help</span><span class="o">=</span><span class="s">'path to the root of the digital carrier'</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">'path/to/carrier'</span><span class="p">)</span>
<span class="n">parser</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">'--id'</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
<span class="n">help</span><span class="o">=</span><span class="s">'media id assigned to the digital carrier'</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">'M######_####'</span><span class="p">)</span>
</code></pre></div></div> <ul> <li>In the terminal, test the script through each scenario. <ul> <li>Run the script with the help flag.</li> <li>Run the script without any argument.</li> <li>Run the script with all required arguments</li> </ul> </li> </ul> <h2 id="a-skeleton-script"> <a href="#a-skeleton-script" class="anchor-heading" aria-labelledby="a-skeleton-script"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A Skeleton Script </h2> <p>At this point, it may feel like <code class="language-plaintext highlighter-rouge">ft.py</code> doesn’t really accomplish anything. However, parsing arguments sets up the rest of any script. By first defining all of the user input that we need, we make it easy to understand what data we’ll have available later in the script.</p> <p>We can make improvement to this skeleton. For example, we could validate that the file path exists or that the media id is formatted correctly. The <a href="https://docs.python.org/3/library/argparse.html#type"><code class="language-plaintext highlighter-rouge">type</code> argument</a> is one method to do this. We’ll return to these ideas as we explore more of Python. For the next lesson, we’ll focus on using the input within the script.</p> <h3 id="current-script-with-arguments"> <a href="#current-script-with-arguments" class="anchor-heading" aria-labelledby="current-script-with-arguments"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Current script with arguments </h3> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python3
</span>
<span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="p">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s">'Process some integers.'</span><span class="p">)</span>
<span class="n">parser</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">'--source'</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
<span class="n">help</span><span class="o">=</span><span class="s">'path to the root of the digital carrier'</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">'path/to/carrier'</span><span class="p">)</span>
<span class="n">parser</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">'--id'</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
<span class="n">help</span><span class="o">=</span><span class="s">'media id assigned to the digital carrier'</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">'M######_####'</span><span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s">'Hello world'</span><span class="p">)</span>
</code></pre></div></div> </div> </div> </div> </body> </html>
